<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Animated Films for Listening Practice</title>
  <link href="https://fonts.googleapis.com/css2?family=Comic+Neue&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style2.css">
</head>

<body>
  <div class="background-decor"></div>
  <header class="dynamic-island">
    <h1>Animated Films for Listening Practice</h1>
    <a href="index.html" class="main-button">Main Page</a>
  </header>

  <div class="container">
    <div class="video-block">
      <h2>The History of Chocolate</h2>
      <iframe width="560" height="315" src="https://www.youtube.com/embed/ibjUpk9Iagk?si=AP13kVHyQApHRSFH"
        title="YouTube video player" frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
      <div class="paragraph-task">
        <p>Short Description:
          This TED-Ed video explores the fascinating history of chocolate—from its origins in ancient Mesoamerica to its
          evolution into the sweet treat we enjoy today. It discusses how chocolate was first consumed, its cultural
          significance, and how it spread across the world.</p>
      </div>

      <div class="task-section">
        <p>1. True / False</p>
        <div class="statement">Chocolate was originally consumed as a sweet drink.
          <label><input type="checkbox"> True</label>
          <label><input type="checkbox"> False</label>
        </div>
        <div class="statement">The Aztecs used cacao beans as currency.
          <label><input type="checkbox"> True</label>
          <label><input type="checkbox"> False</label>
        </div>
        <div class="statement">Hernán Cortés introduced chocolate to Europe.
          <label><input type="checkbox"> True</label>
          <label><input type="checkbox"> False</label>
        </div>
        <div class="statement">The original chocolate drink was hot and sugary.
          <label><input type="checkbox"> True</label>
          <label><input type="checkbox"> False</label>
        </div>
        <div class="statement">Chocolate was once believed to have magical or spiritual powers.
          <label><input type="checkbox"> True</label>
          <label><input type="checkbox"> False</label>
        </div>
      </div>

      <div class="task-section">
        <p>2. Answer the Questions</p>
        <label>1. Who were the first people to use cacao?<br><input type="text"
            onkeydown="lockInput(event, this)"></label>
        <label>2. How did the Aztecs value cacao beans?<br><input type="text"
            onkeydown="lockInput(event, this)"></label>
        <label>3. What did Hernán Cortés do that helped spread chocolate to Europe?<br><input type="text"
            onkeydown="lockInput(event, this)"></label>
        <label>4. How was early chocolate different from what we eat today?<br><input type="text"
            onkeydown="lockInput(event, this)"></label>
        <label>5. Why was chocolate important in Aztec society?<br><input type="text"
            onkeydown="lockInput(event, this)"></label>
      </div>

      <div class="task-section">
        <p>3. Matching Task</p>
        <table>
          <thead>
            <tr>
              <th>A (Items)</th>
              <th>B (Select Match)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1. Hernán Cortés</td>
              <td>
                <select>
                  <option value="">Select...</option>
                  <option>A. Brought chocolate to the Old World</option>
                  <option>B. Used cacao as currency</option>
                  <option>C. Bitter and spiced</option>
                  <option>D. Where chocolate became sweetened</option>
                </select>
              </td>
            </tr>
            <tr>
              <td>2. Aztecs</td>
              <td>
                <select>
                  <option value="">Select...</option>
                  <option>A. Brought chocolate to the Old World</option>
                  <option>B. Used cacao as currency</option>
                  <option>C. Bitter and spiced</option>
                  <option>D. Where chocolate became sweetened</option>
                </select>
              </td>
            </tr>
            <tr>
              <td>3. Europe</td>
              <td>
                <select>
                  <option value="">Select...</option>
                  <option>A. Brought chocolate to the Old World</option>
                  <option>B. Used cacao as currency</option>
                  <option>C. Bitter and spiced</option>
                  <option>D. Where chocolate became sweetened</option>
                </select>
              </td>
            </tr>
            <tr>
              <td>4. Original chocolate drink</td>
              <td>
                <select>
                  <option value="">Select...</option>
                  <option>A. Brought chocolate to the Old World</option>
                  <option>B. Used cacao as currency</option>
                  <option>C. Bitter and spiced</option>
                  <option>D. Where chocolate became sweetened</option>
                </select>
              </td>
            </tr>
          </tbody>
        </table>
      </div>


      <button class="check-button" onclick="checkAnswers()">Check Answers</button>
      <div id="score" class="score"></div>
    </div>
  </div>

  <footer>
    <p>© 2025 Listening Through Animation – Designed for English Lessons</p>
  </footer>

  <script>
    // Чекбоксы ведут себя как радиокнопки
    document.querySelectorAll('.statement').forEach(statement => {
      const checkboxes = statement.querySelectorAll('input[type="checkbox"]');
      checkboxes.forEach(chk => {
        chk.addEventListener('change', () => {
          checkboxes.forEach(box => {
            if (box !== chk) box.checked = false;
          });
        });
      });
    });

    function lockInput(event, input) {
      if (event.key === 'Enter') {
        event.preventDefault();
        input.setAttribute('readonly', true);
      }
    }

    function checkAnswers() {
      let score = 0;
      const total = 14;

      // === TRUE/FALSE ===
      const trueFalseAnswers = [false, true, true, false, true];
      const trueFalseSection = document.querySelectorAll('.task-section')[0];
      trueFalseSection.querySelectorAll('.statement').forEach((statement, i) => {
        const checkboxes = statement.querySelectorAll('input[type="checkbox"]');
        const isTrueChecked = checkboxes[0].checked;
        const correct = isTrueChecked === trueFalseAnswers[i];
        statement.classList.remove('correct', 'incorrect');
        statement.classList.add(correct ? 'correct' : 'incorrect');
        if (correct) score++;
      });

      const expectedAnswers = [
        'The Olmecs',
        'As currency and a sacred gift from the gods',
        'Introduced cacao to Europe after the conquest of the Aztecs',
        'It was a bitter spiced drink not sweet like today',
        'It was used in rituals as currency and reserved for the elite'
      ];

      const normalize = str => str
        .toLowerCase()
        .replace(/[.,;!?]/g, '')  // убираем знаки препинания
        .trim();

      const questionSection = document.querySelectorAll('.task-section')[1];

      questionSection.querySelectorAll('input[type="text"]').forEach((input, i) => {
        const userAnswer = normalize(input.value);
        const expectedAnswer = normalize(expectedAnswers[i]);
        const correct = userAnswer.includes(expectedAnswer); // или: userAnswer === expectedAnswer
        input.classList.remove('correct', 'incorrect');
        input.classList.add(correct ? 'correct' : 'incorrect');
        if (correct) score++;
      });



      // === MATCHING TASK ===
      const correctMatches = [
        'A. Brought chocolate to the Old World',
        'B. Used cacao as currency',
        'D. Where chocolate became sweetened',
        'C. Bitter and spiced'
      ];
      const matchSection = document.querySelectorAll('.task-section')[2];
      matchSection.querySelectorAll('select').forEach((select, i) => {
        const correct = select.value === correctMatches[i];
        select.classList.remove('correct', 'incorrect');
        select.classList.add(correct ? 'correct' : 'incorrect');
        if (correct) score++;
      });

      // === DISPLAY RESULT ===
      document.getElementById('score').textContent = `Your score: ${score} / ${total}`;
    }
  </script>


</body>

</html>