<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Animated Films for Listening Practice</title>
  <link href="https://fonts.googleapis.com/css2?family=Comic+Neue&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style2.css">
</head>

<body>
  <div class="background-decor"></div>
  <header class="dynamic-island">
    <h1>Animated Films for Listening Practice</h1>
    <a href="index.html" class="main-button">Main Page</a>
  </header>

  <div class="container">
    <div class="video-block">
      <h2>TANGLED Clip | Rapunzel & Flynn Rider</h2>
      <iframe width="560" height="315" src="https://www.youtube.com/embed/DNx2PHGpPwQ?si=n1z311cEogVjUWQi"
        title="YouTube video player" frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
      <div class="paragraph-task">
        <p>In this funny and exciting scene from Tangled, Rapunzel meets Flynn Rider for the first time. He climbs into
          her tower, but she is afraid and uses a frying pan to protect herself. She ties him up with her magical long
          hair and asks him questions. This scene shows Rapunzel's courage and curiosity about the outside world.</p>
      </div>

      <div class="task-section">
        <p>1. True / False</p>
        <div class="statement">Flynn Rider climbs into Rapunzel’s tower by accident.
          <label><input type="checkbox"> True</label>
          <label><input type="checkbox"> False</label>
        </div>
        <div class="statement">Rapunzel is scared of Flynn at first.
          <label><input type="checkbox"> True</label>
          <label><input type="checkbox"> False</label>
        </div>
        <div class="statement">Rapunzel ties Flynn up with a rope.
          <label><input type="checkbox"> True</label>
          <label><input type="checkbox"> False</label>
        </div>
        <div class="statement">Flynn is calm and polite when he sees Rapunzel.
          <label><input type="checkbox"> True</label>
          <label><input type="checkbox"> False</label>
        </div>
        <div class="statement">Rapunzel has never seen a stranger before.
          <label><input type="checkbox"> True</label>
          <label><input type="checkbox"> False</label>
        </div>
      </div>

      <div class="task-section">
        <p>2. Answer the Questions</p>
        <label>1. Who is Flynn Rider and why does he enter the tower?<br><input type="text"
            onkeydown="lockInput(event, this)"></label>
        <label>2. How does Rapunzel react when she first sees Flynn?<br><input type="text"
            onkeydown="lockInput(event, this)"></label>
        <label>3. What does she use to tie him up?<br><input type="text" onkeydown="lockInput(event, this)"></label>
        <label>4. What does Rapunzel want to know from Flynn?<br><input type="text"
            onkeydown="lockInput(event, this)"></label>
        <label>5. How does the scene show Rapunzel’s personality?<br><input type="text"
            onkeydown="lockInput(event, this)"></label>
      </div>

      <div class="task-section">
        <p>3. Matching Task</p>
        <table>
          <thead>
            <tr>
              <th>A (Words)</th>
              <th>B (Select Match)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1. Rapunzel</td>
              <td>
                <select>
                  <option value="">Select...</option>
                  <option>A. Tied up and questioned in the tower</option>
                  <option>B. Where Rapunzel has lived her whole life</option>
                  <option>C. Used by Rapunzel to defend herself</option>
                  <option>D. Very long and magica</option>
                </select>
              </td>
            </tr>
            <tr>
              <td>2. The Tower</td>
              <td>
                <select>
                  <option value="">Select...</option>
                  <option>A. Tied up and questioned in the tower</option>
                  <option>B. Where Rapunzel has lived her whole life</option>
                  <option>C. Used by Rapunzel to defend herself</option>
                  <option>D. Very long and magica</option>
                </select>
              </td>
            </tr>
            <tr>
              <td>3. Frying Pan</td>
              <td>
                <select>
                  <option value="">Select...</option>
                  <option>A. Tied up and questioned in the tower</option>
                  <option>B. Where Rapunzel has lived her whole life</option>
                  <option>C. Used by Rapunzel to defend herself</option>
                  <option>D. Very long and magica</option>
                </select>
              </td>
            </tr>
            <tr>
              <td>4. Hair</td>
              <td>
                <select>
                  <option value="">Select...</option>
                  <option>A. Tied up and questioned in the tower</option>
                  <option>B. Where Rapunzel has lived her whole life</option>
                  <option>C. Used by Rapunzel to defend herself</option>
                  <option>D. Very long and magica</option>
                </select>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <button class="check-button" onclick="checkAnswers()">Check Answers</button>
      <div id="score" class="score"></div>
    </div>
  </div>

  <footer>
    <p>© 2025 Listening Through Animation – Designed for English Lessons</p>
  </footer>

  <script>
    // Чекбоксы ведут себя как радиокнопки
    document.querySelectorAll('.statement').forEach(statement => {
      const checkboxes = statement.querySelectorAll('input[type="checkbox"]');
      checkboxes.forEach(chk => {
        chk.addEventListener('change', () => {
          checkboxes.forEach(box => {
            if (box !== chk) box.checked = false;
          });
        });
      });
    });

    function lockInput(event, input) {
      if (event.key === 'Enter') {
        event.preventDefault();
        input.setAttribute('readonly', true);
      }
    }

    function checkAnswers() {
      let score = 0;
      const total = 14;

      // === TRUE/FALSE ===
      const trueFalseAnswers = [false, true, false, false, true];
      const trueFalseSection = document.querySelectorAll('.task-section')[0];
      trueFalseSection.querySelectorAll('.statement').forEach((statement, i) => {
        const checkboxes = statement.querySelectorAll('input[type="checkbox"]');
        const isTrueChecked = checkboxes[0].checked;
        const correct = isTrueChecked === trueFalseAnswers[i];
        statement.classList.remove('correct', 'incorrect');
        statement.classList.add(correct ? 'correct' : 'incorrect');
        if (correct) score++;
      });

      const expectedAnswers = [
        'Flynn is a thief; he climbs the tower to hide',
        'She is scared and defensive',
        'Her magical hair',
        'She wants to know about the outside world',
        'It shows she is brave, curious, and smart'
      ];

      const normalize = str => str
        .toLowerCase()
        .replace(/[.,;!?]/g, '')  // убираем знаки препинания
        .trim();

      const questionSection = document.querySelectorAll('.task-section')[1];

      questionSection.querySelectorAll('input[type="text"]').forEach((input, i) => {
        const userAnswer = normalize(input.value);
        const expectedAnswer = normalize(expectedAnswers[i]);
        const correct = userAnswer.includes(expectedAnswer); // или: userAnswer === expectedAnswer
        input.classList.remove('correct', 'incorrect');
        input.classList.add(correct ? 'correct' : 'incorrect');
        if (correct) score++;
      });



      // === MATCHING TASK ===
      const correctMatches = [
        'A. Tied up and questioned in the tower',
        'B. Where Rapunzel has lived her whole life',
        'C. Used by Rapunzel to defend herself',
        'D. Very long and magica'
      ];
      const matchSection = document.querySelectorAll('.task-section')[2];
      matchSection.querySelectorAll('select').forEach((select, i) => {
        const correct = select.value === correctMatches[i];
        select.classList.remove('correct', 'incorrect');
        select.classList.add(correct ? 'correct' : 'incorrect');
        if (correct) score++;
      });

      // === DISPLAY RESULT ===
      document.getElementById('score').textContent = `Your score: ${score} / ${total}`;
    }
  </script>


</body>

</html>